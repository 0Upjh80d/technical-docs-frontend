
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../conversation-broker/" rel="prev"/>
<link href="../audio-service/" rel="next"/>
<link href="../../../../../../../assets/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.0, mkdocs-material-9.5.29" name="generator"/>
<title>Preference Service - Data Analytics &amp; AI Documentation</title>
<link href="../../../../../../../assets/stylesheets/main.76a95c52.min.css" rel="stylesheet"/>
<link href="../../../../../../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="https://unpkg.com/katex@0/dist/katex.min.css" rel="stylesheet"/>
<link href="../../../../../../../styles/mermaid.css" rel="stylesheet"/>
<link href="../../../../../../../styles/author.css" rel="stylesheet"/>
<link href="../../../../../../../styles/doculabels.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#preference-service">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Data Analytics &amp; AI Documentation" class="md-header__button md-logo" data-md-component="logo" href="../../../../../../.." title="Data Analytics &amp; AI Documentation">
<svg viewbox="0 0 89 89" xmlns="http://www.w3.org/2000/svg">
<path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z"></path>
<path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5"></path>
<path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z"></path>
<path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25"></path>
</svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Data Analytics &amp; AI Documentation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Preference Service
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"></path></svg>
</label>
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg>
</label>
<input aria-label="Switch to automatic mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="black" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to automatic mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg>
</label>
</form>
<script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../../../..">
          
  
    
  
  Home

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../../">
          
  
    
  
  Projects

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../../../../blog/">
          
  
    
  
  Articles

        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Data Analytics &amp; AI Documentation" class="md-nav__button md-logo" data-md-component="logo" href="../../../../../../.." title="Data Analytics &amp; AI Documentation">
<svg viewbox="0 0 89 89" xmlns="http://www.w3.org/2000/svg">
<path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z"></path>
<path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5"></path>
<path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z"></path>
<path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25"></path>
</svg>
</a>
    Data Analytics &amp; AI Documentation
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../../../..">
<span class="md-ellipsis">
    Home
  </span>
</a>
<label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
            Home
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="0">
<span class="md-ellipsis">
    Contribution Guides
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_1_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_2">
<span class="md-nav__icon md-icon"></span>
            Contribution Guides
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../../../home/contribution_guides/introduction/">
<span class="md-ellipsis">
    Introduction
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../../../home/contribution_guides/formatting/">
<span class="md-ellipsis">
    Formatting
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../../../home/contribution_guides/endpoints/">
<span class="md-ellipsis">
    Endpoints
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../../../home/contribution_guides/classes_types_and_all/">
<span class="md-ellipsis">
    Classes, Types, and All
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="0">
<span class="md-ellipsis">
    Hooks
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_1_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_3">
<span class="md-nav__icon md-icon"></span>
            Hooks
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../../../home/hooks/authors/">
<span class="md-ellipsis">
    Authors
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../../../home/hooks/doculabels/">
<span class="md-ellipsis">
    Doculabels
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
<span class="md-ellipsis">
    Projects
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Projects
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="">
<span class="md-ellipsis">
    Conversational Assistant
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_1">
<span class="md-nav__icon md-icon"></span>
            Conversational Assistant
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2_1_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_1_1" id="__nav_2_1_1_label" tabindex="0">
<span class="md-ellipsis">
    Webapp
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_1_1_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_1_1">
<span class="md-nav__icon md-icon"></span>
            Webapp
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2_1_1_1" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../">
<span class="md-ellipsis">
    Frontend
  </span>
</a>
<label class="md-nav__link" for="__nav_2_1_1_1" id="__nav_2_1_1_1_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_2_1_1_1_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_2_1_1_1">
<span class="md-nav__icon md-icon"></span>
            Frontend
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2_1_1_1_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_1_1_1_2" id="__nav_2_1_1_1_2_label" tabindex="0">
<span class="md-ellipsis">
    Services
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_1_1_1_2_label" class="md-nav" data-md-level="5">
<label class="md-nav__title" for="__nav_2_1_1_1_2">
<span class="md-nav__icon md-icon"></span>
            Services
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../voice-activity-detection/">
<span class="md-ellipsis">
    Voice Activity Detection <code class='doculabel' style='color: var(--md-code-fg-color);'>deprecated</code>
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../chat-message/">
<span class="md-ellipsis">
    Chat Message Service
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../audio-player/">
<span class="md-ellipsis">
    Audio Player Service
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../endpoint/">
<span class="md-ellipsis">
    Endpoint Service
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../conversation-broker/">
<span class="md-ellipsis">
    Conversation Broker Service
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Preference Service
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Preference Service
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#labelservice-preferenceservice">
<span class="md-ellipsis">
      <code class='doculabel' style='color: var(--md-code-hl-constant-color);'>service</code> PreferenceService
    </span>
</a>
<nav aria-label="<code class='doculabel' style='color: var(--md-code-hl-constant-color);'>service</code> PreferenceService" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#attributes">
<span class="md-ellipsis">
      Attributes
    </span>
</a>
<nav aria-label="Attributes" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#labelattr-chatmode">
<span class="md-ellipsis">
      <code class='doculabel' style='color: var(--md-code-hl-number-color);'>attr</code> $chatMode
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#labelattr-language">
<span class="md-ellipsis">
      <code class='doculabel' style='color: var(--md-code-hl-number-color);'>attr</code> $language
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#methods">
<span class="md-ellipsis">
      Methods
    </span>
</a>
<nav aria-label="Methods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#labelprivate-labelmeth-initialise-preferences">
<span class="md-ellipsis">
      <code class='doculabel' style='color: var(--md-code-hl-string-color);'>private</code> <code class='doculabel' style='color: var(--md-code-hl-color);'>meth</code> Initialise Preferences
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#labelprivate-labelmeth-listen-to-local-storage-events">
<span class="md-ellipsis">
      <code class='doculabel' style='color: var(--md-code-hl-string-color);'>private</code> <code class='doculabel' style='color: var(--md-code-hl-color);'>meth</code> Listen To Local Storage Events
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#labelprivate-labelmeth-load-from-local-storage">
<span class="md-ellipsis">
      <code class='doculabel' style='color: var(--md-code-hl-string-color);'>private</code> <code class='doculabel' style='color: var(--md-code-hl-color);'>meth</code> Load From Local Storage
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#labelprivate-labelmeth-set-to-local-storage">
<span class="md-ellipsis">
      <code class='doculabel' style='color: var(--md-code-hl-string-color);'>private</code> <code class='doculabel' style='color: var(--md-code-hl-color);'>meth</code> Set To Local Storage
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#labelmeth-set-chat-mode">
<span class="md-ellipsis">
      <code class='doculabel' style='color: var(--md-code-hl-color);'>meth</code> Set Chat Mode
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#labelmeth-set-language">
<span class="md-ellipsis">
      <code class='doculabel' style='color: var(--md-code-hl-color);'>meth</code> Set Language
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#older-implementations-labeldeprecated">
<span class="md-ellipsis">
      Older Implementations <code class='doculabel' style='color: var(--md-code-fg-color);'>deprecated</code>
    </span>
</a>
<nav aria-label="Older Implementations <code class='doculabel' style='color: var(--md-code-fg-color);'>deprecated</code>" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#show-live-transcription">
<span class="md-ellipsis">
      Show Live Transcription
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#voice-interrupt">
<span class="md-ellipsis">
      Voice Interrupt
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#detect-voice-start">
<span class="md-ellipsis">
      Detect Voice Start
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#detect-voice-end">
<span class="md-ellipsis">
      Detect Voice End
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../audio-service/">
<span class="md-ellipsis">
    Audio Service
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../profile-service/">
<span class="md-ellipsis">
    Profile Service
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_1_1_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_1_1_2" id="__nav_2_1_1_2_label" tabindex="0">
<span class="md-ellipsis">
    Backend
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_1_1_2_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_2_1_1_2">
<span class="md-nav__icon md-icon"></span>
            Backend
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_1_1_2_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_1_1_2_1" id="__nav_2_1_1_2_1_label" tabindex="0">
<span class="md-ellipsis">
    API
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_1_1_2_1_label" class="md-nav" data-md-level="5">
<label class="md-nav__title" for="__nav_2_1_1_2_1">
<span class="md-nav__icon md-icon"></span>
            API
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../backend/api/endpoints/">
<span class="md-ellipsis">
    Endpoints
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../../../../blog/">
<span class="md-ellipsis">
    Articles
  </span>
</a>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Articles
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
<span class="md-ellipsis">
    Archive
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_2">
<span class="md-nav__icon md-icon"></span>
            Archive
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../../../blog/archive/2024/">
<span class="md-ellipsis">
    2024
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
<span class="md-ellipsis">
    Categories
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_3">
<span class="md-nav__icon md-icon"></span>
            Categories
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../../../blog/category/engineering/">
<span class="md-ellipsis">
    Engineering
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../../../blog/category/guides/">
<span class="md-ellipsis">
    Guides
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#labelservice-preferenceservice">
<span class="md-ellipsis">
      <code class='doculabel' style='color: var(--md-code-hl-constant-color);'>service</code> PreferenceService
    </span>
</a>
<nav aria-label="<code class='doculabel' style='color: var(--md-code-hl-constant-color);'>service</code> PreferenceService" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#attributes">
<span class="md-ellipsis">
      Attributes
    </span>
</a>
<nav aria-label="Attributes" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#labelattr-chatmode">
<span class="md-ellipsis">
      <code class='doculabel' style='color: var(--md-code-hl-number-color);'>attr</code> $chatMode
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#labelattr-language">
<span class="md-ellipsis">
      <code class='doculabel' style='color: var(--md-code-hl-number-color);'>attr</code> $language
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#methods">
<span class="md-ellipsis">
      Methods
    </span>
</a>
<nav aria-label="Methods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#labelprivate-labelmeth-initialise-preferences">
<span class="md-ellipsis">
      <code class='doculabel' style='color: var(--md-code-hl-string-color);'>private</code> <code class='doculabel' style='color: var(--md-code-hl-color);'>meth</code> Initialise Preferences
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#labelprivate-labelmeth-listen-to-local-storage-events">
<span class="md-ellipsis">
      <code class='doculabel' style='color: var(--md-code-hl-string-color);'>private</code> <code class='doculabel' style='color: var(--md-code-hl-color);'>meth</code> Listen To Local Storage Events
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#labelprivate-labelmeth-load-from-local-storage">
<span class="md-ellipsis">
      <code class='doculabel' style='color: var(--md-code-hl-string-color);'>private</code> <code class='doculabel' style='color: var(--md-code-hl-color);'>meth</code> Load From Local Storage
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#labelprivate-labelmeth-set-to-local-storage">
<span class="md-ellipsis">
      <code class='doculabel' style='color: var(--md-code-hl-string-color);'>private</code> <code class='doculabel' style='color: var(--md-code-hl-color);'>meth</code> Set To Local Storage
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#labelmeth-set-chat-mode">
<span class="md-ellipsis">
      <code class='doculabel' style='color: var(--md-code-hl-color);'>meth</code> Set Chat Mode
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#labelmeth-set-language">
<span class="md-ellipsis">
      <code class='doculabel' style='color: var(--md-code-hl-color);'>meth</code> Set Language
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#older-implementations-labeldeprecated">
<span class="md-ellipsis">
      Older Implementations <code class='doculabel' style='color: var(--md-code-fg-color);'>deprecated</code>
    </span>
</a>
<nav aria-label="Older Implementations <code class='doculabel' style='color: var(--md-code-fg-color);'>deprecated</code>" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#show-live-transcription">
<span class="md-ellipsis">
      Show Live Transcription
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#voice-interrupt">
<span class="md-ellipsis">
      Voice Interrupt
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#detect-voice-start">
<span class="md-ellipsis">
      Detect Voice Start
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#detect-voice-end">
<span class="md-ellipsis">
      Detect Voice End
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="preference-service">Preference Service<a class="headerlink" href="#preference-service" title="Permanent link">¶</a></h1>
<p>This service handles the user preference across the webapp. It is responsible for persisting these states into local storage and listening to changes to local storage.</p>
<p>Currently, this service is used for managing:</p>
<ul>
<li>Language</li>
<li>Chat mode</li>
</ul>
<hr/>
<h2 id="labelservice-preferenceservice"><code class='doculabel' style='color: var(--md-code-hl-constant-color);'>service</code> PreferenceService<a class="headerlink" href="#labelservice-preferenceservice" title="Permanent link">¶</a></h2>
<h3 id="attributes">Attributes<a class="headerlink" href="#attributes" title="Permanent link">¶</a></h3>
<h4 id="labelattr-chatmode"><code class='doculabel' style='color: var(--md-code-hl-number-color);'>attr</code> $chatMode<a class="headerlink" href="#labelattr-chatmode" title="Permanent link">¶</a></h4>
<p><code>BehaviorSubject&lt;ChatMode&gt;</code> is the state controller for the chat mode, which manages whether the app operates in text or voice mode.</p>
<h4 id="labelattr-language"><code class='doculabel' style='color: var(--md-code-hl-number-color);'>attr</code> $language<a class="headerlink" href="#labelattr-language" title="Permanent link">¶</a></h4>
<p><code>BehaviorSubject&lt;Language&gt;</code> controls the preferred language for the application.</p>
<h3 id="methods">Methods<a class="headerlink" href="#methods" title="Permanent link">¶</a></h3>
<h4 id="labelprivate-labelmeth-initialise-preferences"><code class='doculabel' style='color: var(--md-code-hl-string-color);'>private</code> <code class='doculabel' style='color: var(--md-code-hl-color);'>meth</code> Initialise Preferences<a class="headerlink" href="#labelprivate-labelmeth-initialise-preferences" title="Permanent link">¶</a></h4>
<div class="language-text highlight"><pre><span></span><code>private initialisePreferences(): void
</code></pre></div>
<dl>
<dt>Description</dt>
<dd>Initializes the preferences by subscribing to <code>BehaviorSubjects</code> and syncing them with local storage.</dd>
</dl>
<h4 id="labelprivate-labelmeth-listen-to-local-storage-events"><code class='doculabel' style='color: var(--md-code-hl-string-color);'>private</code> <code class='doculabel' style='color: var(--md-code-hl-color);'>meth</code> Listen To Local Storage Events<a class="headerlink" href="#labelprivate-labelmeth-listen-to-local-storage-events" title="Permanent link">¶</a></h4>
<div class="language-text highlight"><pre><span></span><code>private listenToLocalStorageEvents(): void
</code></pre></div>
<dl>
<dt>Description</dt>
<dd>Listens for local storage changes and updates the corresponding preference states in real-time.</dd>
</dl>
<h4 id="labelprivate-labelmeth-load-from-local-storage"><code class='doculabel' style='color: var(--md-code-hl-string-color);'>private</code> <code class='doculabel' style='color: var(--md-code-hl-color);'>meth</code> Load From Local Storage<a class="headerlink" href="#labelprivate-labelmeth-load-from-local-storage" title="Permanent link">¶</a></h4>
<div class="language-text highlight"><pre><span></span><code>private loadFromLocalStorage&lt;T&gt;(key: PreferenceKey, defaultValue: T): T
</code></pre></div>
<dl>
<dt>Description</dt>
<dd>Loads a preference value from local storage, or uses the provided default value if no value is found in storage.</dd>
<dt>Parameters</dt>
<dd><code>key</code> (<code>PreferenceKey</code>): The key under which the preference is stored.</dd>
<dd><code>defaultValue</code> (<code>T</code>): The default value to use if the preference is not found in storage.</dd>
<dt>Returns</dt>
<dd><code>T</code></dd>
</dl>
<h4 id="labelprivate-labelmeth-set-to-local-storage"><code class='doculabel' style='color: var(--md-code-hl-string-color);'>private</code> <code class='doculabel' style='color: var(--md-code-hl-color);'>meth</code> Set To Local Storage<a class="headerlink" href="#labelprivate-labelmeth-set-to-local-storage" title="Permanent link">¶</a></h4>
<div class="language-text highlight"><pre><span></span><code>private setToLocalStorage&lt;T&gt;(key: string, value: T): void
</code></pre></div>
<dl>
<dt>Description</dt>
<dd>Stores a preference value in local storage.</dd>
<dt>Parameters</dt>
<dd><code>key</code> (<code>string</code>): The storage key for the preference.</dd>
<dd><code>value</code> (<code>T</code>): The value to store in local storage.</dd>
</dl>
<h4 id="labelmeth-set-chat-mode"><code class='doculabel' style='color: var(--md-code-hl-color);'>meth</code> Set Chat Mode<a class="headerlink" href="#labelmeth-set-chat-mode" title="Permanent link">¶</a></h4>
<div class="language-text highlight"><pre><span></span><code>setChatMode(mode: ChatMode): void
</code></pre></div>
<dl>
<dt>Description</dt>
<dd>Sets the chat mode (either voice or text mode) for the application.</dd>
<dt>Parameters</dt>
<dd><code>mode</code> (<code>ChatMode</code>): The chat mode to set, either <code>ChatMode.Voice</code> or <code>ChatMode.Text</code>.</dd>
</dl>
<h4 id="labelmeth-set-language"><code class='doculabel' style='color: var(--md-code-hl-color);'>meth</code> Set Language<a class="headerlink" href="#labelmeth-set-language" title="Permanent link">¶</a></h4>
<div class="language-text highlight"><pre><span></span><code>setLanguage(language: Language): void
</code></pre></div>
<dl>
<dt>Description</dt>
<dd>Sets the preferred language for the application.</dd>
<dt>Parameters</dt>
<dd><code>language</code> (<code>Language</code>): The selected language preference.</dd>
</dl>
<hr/>
<h3 id="older-implementations-labeldeprecated">Older Implementations <code class='doculabel' style='color: var(--md-code-fg-color);'>deprecated</code><a class="headerlink" href="#older-implementations-labeldeprecated" title="Permanent link">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Not Currently Used</p>
<p>The following are older features previously handled by this service, but they are no longer in use. They remain documented here for reference but are not active in the current version of the app.</p>
</div>
<h4 id="show-live-transcription">Show Live Transcription<a class="headerlink" href="#show-live-transcription" title="Permanent link">¶</a></h4>
<p>Toggles live transcription of the user’s voice input during interactions. This would show a live text transcription as the user speaks.</p>
<h4 id="voice-interrupt">Voice Interrupt<a class="headerlink" href="#voice-interrupt" title="Permanent link">¶</a></h4>
<p>Allows the user to enable or disable the ability to interrupt ongoing audio playback with a voice command.</p>
<h4 id="detect-voice-start">Detect Voice Start<a class="headerlink" href="#detect-voice-start" title="Permanent link">¶</a></h4>
<p>Controls whether the app would automatically detect when the user starts speaking to begin recording.</p>
<h4 id="detect-voice-end">Detect Voice End<a class="headerlink" href="#detect-voice-end" title="Permanent link">¶</a></h4>
<p>Controls the automatic detection of the end of the user’s voice input, used to stop recording after a period of silence.</p>
<div class="author-block">
<span class="author-block-updated">
        Updated 23 Oct 2024
      </span>
<div class="author-block-authors">
<div class="author-individual">
<a href="https://github.com/TsienJin" target="_blank">
<img alt="" src="https://avatars.githubusercontent.com/u/46650957?v=4"/>
</a>
<div class="author-hover-content">
<span class="author-role">Contributor</span>
<span class="author-name">Ong Tsien Jin</span>
</div>
</div>
<div class="author-individual">
<a href="https://github.com/gowribhat" target="_blank">
<img alt="" src="https://avatars.githubusercontent.com/u/97337263?v=4"/>
</a>
<div class="author-hover-content">
<span class="author-role">Contributor</span>
<span class="author-name">Gowri Bhat</span>
</div>
</div>
</div>
</div>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Conversation Broker Service" class="md-footer__link md-footer__link--prev" href="../conversation-broker/">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                Conversation Broker Service
              </div>
</div>
</a>
<a aria-label="Next: Audio Service" class="md-footer__link md-footer__link--next" href="../audio-service/">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                Audio Service
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../../../../../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.action.edit", "content.action.view", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.suggest", "toc.follow"], "search": "../../../../../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../../../../../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>document$.subscribe(() => {
            window.update_swagger_ui_iframe_height = function (id) {
                var iFrameID = document.getElementById(id);
                if (iFrameID) {
                    full_height = (iFrameID.contentWindow.document.body.scrollHeight + 80) + "px";
                    iFrameID.height = full_height;
                    iFrameID.style.height = full_height;
                }
            }
        
            let iframe_id_list = []
            var iframes = document.getElementsByClassName("swagger-ui-iframe");
            for (var i = 0; i < iframes.length; i++) { 
                iframe_id_list.push(iframes[i].getAttribute("id"))
            }
        
            let ticking = true;
            
            document.addEventListener('scroll', function(e) {
                if (!ticking) {
                    window.requestAnimationFrame(()=> {
                        let half_vh = window.innerHeight/2;
                        for(var i = 0; i < iframe_id_list.length; i++) {
                            let element = document.getElementById(iframe_id_list[i])
                            if(element==null){
                                return
                            }
                            let diff = element.getBoundingClientRect().top
                            if(element.contentWindow.update_top_val){
                                element.contentWindow.update_top_val(half_vh - diff)
                            }
                        }
                        ticking = false;
                    });
                    ticking = true;
                }
            });
        
            const dark_scheme_name = "slate"
            
            window.scheme = document.body.getAttribute("data-md-color-scheme")
            const options = {
                attributeFilter: ['data-md-color-scheme'],
            };
            function color_scheme_callback(mutations) {
                for (let mutation of mutations) {
                    if (mutation.attributeName === "data-md-color-scheme") {
                        scheme = document.body.getAttribute("data-md-color-scheme")
                        var iframe_list = document.getElementsByClassName("swagger-ui-iframe")
                        for(var i = 0; i < iframe_list.length; i++) {
                            var ele = iframe_list.item(i);
                            if (ele) {
                                if (scheme === dark_scheme_name) {
                                    ele.contentWindow.enable_dark_mode();
                                } else {
                                    ele.contentWindow.disable_dark_mode();
                                }
                            }
                        }
                    }
                }
            }
            observer = new MutationObserver(color_scheme_callback);
            observer.observe(document.body, options);
            })</script></body>
</html>